// login.ts
import { chromium } from '@playwright/test';
import fs from 'fs';

(async () => {
  const browser = await chromium.launch({ headless: false });
  const context = await browser.newContext();
  const page = await context.newPage();

  await page.goto('https://your-dynamics-url.com');

  // Perform manual login and complete MFA
  console.log("Please log in manually and complete MFA...");
  await page.waitForTimeout(60000); // wait for manual login + MFA (~60 sec)

  // Save authentication session to file
  await context.storageState({ path: 'auth.json' });

  await browser.close();
})();






npx ts-node login.ts







